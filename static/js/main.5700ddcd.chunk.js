(this["webpackJsonpflatten-the-curve-react"]=this["webpackJsonpflatten-the-curve-react"]||[]).push([[0],{156:function(t,e,a){t.exports=a(166)},161:function(t,e,a){},163:function(t,e){function a(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id=163},165:function(t,e,a){},166:function(t,e,a){"use strict";a.r(e);var n=a(48),r=a.n(n),o=a(150),s=a.n(o),c=(a(161),a(111)),i=a(112),l=a(116),u=a(115),d=a(151),p=a.n(d),h=(a(149),function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).updateData=function(){n.myChart.data.labels=n.props.data.map((function(t){return t.label})),n.myChart.data.datasets[0].data=n.props.data.map((function(t){return t.value})),n.myChart.data.datasets[0].fill=!1,n.myChart.data.datasets[0].label=n.props.name,n.myChart.data.datasets[0].borderColor=n.props.color,n.myChart.update()},console.log("Line Constructed"),n.chartRef=r.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log("Line Mounted"),this.myChart=new p.a(this.chartRef.current,{type:"line",data:{labels:[],datasets:[{}]},options:{responsive:!0}}),this.updateData()}},{key:"componentDidUpdate",value:function(){console.log("Line Updated"),this.updateData()}},{key:"render",value:function(){return console.log("Line Rendered"),console.log(this.props.data),r.a.createElement("div",null,r.a.createElement("canvas",{ref:this.chartRef}))}}]),a}(n.Component)),f=a(146),m=a(145),v=a(154),b=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(c.a)(this,a),n=e.call(this,t),console.log("Map Constructed"),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this;console.log("Map Mounted"),this.chart=f.b("french-map",m.a),this.chart.geodata=v.a,this.chart.projection=new m.c.Miller,this.chart.responsive.enabled=!0;var e=this.chart.series.push(new m.b);e.useGeodata=!0;var a=e.mapPolygons.template;a.tooltipText="{name}",a.states.create("hover").properties.fill=f.a("#011627"),a.states.create("active").properties.fill=f.a("#011627"),this.chart.series.values[0].data=this.props.data,a.events.on("hit",(function(e){e.target.isActive=!e.target.isActive;var a=e.target.dataItem.dataContext.department;t.props.onDepartmentClick(a)}))}},{key:"render",value:function(){return console.log("Map Rendered"),r.a.createElement("div",{style:{height:"500px",width:"500px"},id:"french-map"})}}]),a}(n.Component);a(165);var g=function(t){Object(l.a)(a,t);var e=Object(u.a)(a);function a(){var t;return Object(c.a)(this,a),(t=e.call(this)).constructSpecificDataset=function(t){console.log("Specific Dataset Constructed");var e={};return t.forEach((function(t){var a=t.jour;Object.keys(e).includes(a)?(e[a].reanimations=parseInt(t.rea)+parseInt(e[a].reanimations),e[a].returnHome=parseInt(t.rad)+parseInt(e[a].returnHome),e[a].deaths=parseInt(t.dc)+parseInt(e[a].deaths),e[a].hospitalizations=parseInt(t.hosp)+parseInt(e[a].hospitalizations)):e[a]={date:a,reanimations:t.rea,returnHome:t.rad,deaths:t.dc,hospitalizations:t.hosp}})),Object.values(e)},t.departmentClicked=function(e){console.log("Department Click Handler");var a=t.state.departments.slice(),n=a.indexOf(e);-1==n?a.push(e):a.splice(n,1),console.log(t.state.globalDataSet),t.setState({departments:a,specificDataset:0===a.length?t.constructSpecificDataset(t.state.globalDataSet):t.constructSpecificDataset(t.state.globalDataSet.filter((function(t){return a.includes(t.dep)})))})},console.log("Dashboard Constructed"),t.state={globalDataSet:[],specificDataset:[],departmentsDataset:[],departments:[]},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var t=this;console.log("Dashboard Mounted");var e=[];fetch("https://www.data.gouv.fr/fr/datasets/r/63352e38-d353-4b54-bfd1-f1b3ee1cabd7").then((function(t){return t.text()})).then((function(a){e=function(t){for(var e=t.replace(/"/g,"").split("\n"),a=[],n=e[0].replace(/\s/g,"").replace(/"/g,"").split(";"),r=1;r<e.length;r++)if(e[r]){for(var o={},s=e[r].split(";"),c=0;c<n.length;c++)o[n[c]]=s[c];a.push(o)}return a}(a).filter((function(t){return"0"===t.sexe}));var n=t.constructSpecificDataset(e),r=e.filter((function(t){return"2020-04-01"===t.jour})).map((function(t){return{id:"FR-"+t.dep,value:t.rea,department:t.dep}}));t.setState({specificDataset:n,globalDataSet:e,departmentsDataset:r})}))}},{key:"render",value:function(){return console.log("Dashboard Rendered"),this.state.departmentsDataset.length?r.a.createElement("div",{className:"dashboard"},r.a.createElement(b,{data:this.state.departmentsDataset,onDepartmentClick:this.departmentClicked}),r.a.createElement("div",{className:"chartsContainer"},r.a.createElement(h,{data:this.state.specificDataset.map((function(t){return{label:t.date,value:t.hospitalizations}})),name:"Hospitalisations",color:"#c45850"}),r.a.createElement(h,{data:this.state.specificDataset.map((function(t){return{label:t.date,value:t.reanimations}})),name:"Reanimations",color:"#3e95cd"}),r.a.createElement(h,{data:this.state.specificDataset.map((function(t){return{label:t.date,value:t.returnHome}})),name:"Retours \xe0 domicile",color:"#8e5ea2"}),r.a.createElement(h,{data:this.state.specificDataset.map((function(t){return{label:t.date,value:t.deaths}})),name:"D\xe9c\xe8s",color:"#3cba9f"}))):r.a.createElement("h1",null,"Loading")}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[156,1,4]]]);
//# sourceMappingURL=main.5700ddcd.chunk.js.map